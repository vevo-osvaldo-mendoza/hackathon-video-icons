
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Video icons</title>

    <!-- Bootstrap core CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300' rel='stylesheet' type='text/css'>

    <!-- Custom styles for this template -->
    <link href="style.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="container-fluid">
      <div class="row">
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
      </div>

      <div class="row">
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
      </div>

      <div class="row">
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
      </div>

      <div class="row">
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
      </div>

      <div class="row">
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
        <div class="col-md-2">
        </div>
      </div>

      <div class="info" id="info">
        <div class="artist-image" id="artist-image">
        </div>
        <div class="artist-name" id="artist-name">
        </div>
        <div class="video-title" id="video-title">
        </div>
      </div>

    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script>
      (function() {
        var isrcs = ['GBH481500074', 'QMFUA1590146', 'USCJY1531578'];
        var currentIndex = 0;
        var maxIndex = isrcs.length - 1;

        setInterval(function(){
          console.log('currentIndex', currentIndex);
          var isrc = isrcs[currentIndex];

          $('#info').fadeOut(100);

          $.get('https://ct4zm9ph9i.execute-api.us-east-1.amazonaws.com/dev/list_bucket?isrc=' + isrc, function(rgb_values){

            $.get('https://apiv2.vevo.com/video/' + isrc + '?partnerId=af330f2c-5617-4e57-81b5-4a6edbef07cc', function(data) {
              var artist = data.artists[0];
              $('#artist-image').css('background-image', 'url(' + artist.thumbnailUrl + ')');
              $('#artist-name').html(artist.name);
              $('#video-title').html(data.title);

              setTimeout(function(){
                $('#info').fadeIn(3000);
              }, 5000);
            });

            console.log('Switching colors for isrc: ' + isrc);

            $('.col-md-2').each(function(index, elem) {
              if(rgb_values[index]) {
                var red = rgb_values[index][0];
                var green = rgb_values[index][1];
                var blue = rgb_values[index][2];
                var bg = "rgb(" + red + "," + green + "," + blue + ")";
                $(elem).css({'background-color': bg});
              }
            });

            if(currentIndex === maxIndex) {
              currentIndex = 0;
            }else {
              currentIndex += 1;
            }
          });
        }, 20000);
      })();
    </script>
  </body>
</html>
